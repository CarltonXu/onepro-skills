# OnePro 对外故障处理思路（摘要）

来源：OnePro 技术实践文档（故障处理最佳实践）。用于阶段识别、模块映射、日志定位与分析方法。

## 1) 处理流程概览
- **主动获取信息**：问题描述、阶段、环境、截图与日志包。
- **定位阶段**：按交付阶段划分模块与日志路径，先缩小范围。
- **日志分析**：关注 ERROR/Exception/Failed/Timeout 及其上下文。
- **分类归因**：网络/权限/云平台/配置/代码缺陷。
- **闭环输出**：临时缓解 + 永久解决 + 升级建议/研发协作。

## 2) 日志分析方法要点
- **错误关键词**：ERROR / Exception / Failed / Timeout
- **上下文**：提取关键错误前后 200~300 行
- **重复次数**：统计相同错误出现频次
- **关联模块**：通过日志目录或组件名归属模块

## 3) 阶段与关键日志（示例）
> 注：以下为常见示例路径；实际以日志包结构为准。

- **安装/注册阶段**
  - `.../gateway/logs/`（网关注册/启动）
  - `.../porter/logs/`（门户/控制台）

- **初始同步阶段**
  - `.../orchestrator/logs/`（编排/调度）
  - `.../agent/logs/`（源端代理）

- **增量同步阶段**
  - `.../replication/logs/`（复制/链路）
  - `.../snapshot/logs/`（快照/一致性）

- **演练/接管阶段**
  - `.../drill/logs/`（演练流程）
  - `.../takeover/logs/`（接管流程）

## 4) 模块到日志目录映射（常见组件）
- **porter** → `porter/logs/`
- **gateway** → `gateway/logs/`
- **orchestrator** → `orchestrator/logs/`
- **agent** → `agent/logs/`
- **replication** → `replication/logs/`
- **snapshot** → `snapshot/logs/`
- **drill** → `drill/logs/`
- **takeover** → `takeover/logs/`

## 5) 阶段判断逻辑（简要）
- **安装/注册**：系统初始化、注册、服务启动失败
- **同步阶段**：数据复制/一致性/链路中断
- **演练/接管**：演练启动失败、接管异常、回切失败

## 6) 归因示例
- **网络类**：超时、连接拒绝、链路不通
- **权限类**：鉴权失败、权限不足
- **云平台**：API 失败、限流、配额不足
- **配置类**：参数缺失/不匹配
- **代码类**：内部异常、明确逻辑错误

## 7) 使用建议
- 先用阶段+模块缩小范围，再做 Jira 关联检索。
- 若触发代码分析，仅定位单文件与上下游 ≤2 层。
- 对外输出时保持结构化与可执行性。
